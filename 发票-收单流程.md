graph TD
    A[开始] --> B{是否存在发票附件?}
    B -->|否| C[结束]
    B -->|是| D[初始化标志位 needScan = false]
    D --> E{遍历所有发票}
    E --> F{当前发票类型是<br/>'全电发票'或包含'电子'?}
    F -->|否| G[设置 needScan = true<br/>结束循环]
    F -->|是| H{还有未检查的发票?}
    H -->|是| E
    H -->|否| I{needScan标志位?}
    I -->|是| J[显示提示文案]
    I -->|否| C
    J --> C

    style A fill:#9f9,stroke:#333
    style B fill:#f96,stroke:#333
    style F fill:#f96,stroke:#333
    style I fill:#f96,stroke:#333
    style J fill:#f9f,stroke:#333